{"ast":null,"code":"import _toConsumableArray from \"C:/Users/carax/Desktop/SideProject/SFDB-Project/front/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport _slicedToArray from \"C:/Users/carax/Desktop/SideProject/SFDB-Project/front/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport * as React from 'react';\nimport useControlled from '@mui/utils/useControlled';\nimport { useTheme } from '@mui/material/styles';\nimport { useUtils, useLocaleText, useLocalizationContext } from '../useUtils';\nimport { addPositionPropertiesToSections, splitFormatIntoSections, clampDaySectionIfPossible, mergeDateIntoReferenceDate, getSectionsBoundaries, validateSections, getDateFromDateSections } from './useField.utils';\nimport { useValueWithTimezone } from '../useValueWithTimezone';\nimport { getSectionTypeGranularity } from '../../utils/getDefaultReferenceDate';\nexport var useFieldState = function useFieldState(params) {\n  var utils = useUtils();\n  var localeText = useLocaleText();\n  var adapter = useLocalizationContext();\n  var theme = useTheme();\n  var isRTL = theme.direction === 'rtl';\n  var valueManager = params.valueManager,\n    fieldValueManager = params.fieldValueManager,\n    valueType = params.valueType,\n    validator = params.validator,\n    internalProps = params.internalProps,\n    _params$internalProps = params.internalProps,\n    valueProp = _params$internalProps.value,\n    defaultValue = _params$internalProps.defaultValue,\n    referenceDateProp = _params$internalProps.referenceDate,\n    onChange = _params$internalProps.onChange,\n    format = _params$internalProps.format,\n    _params$internalProps2 = _params$internalProps.formatDensity,\n    formatDensity = _params$internalProps2 === void 0 ? 'dense' : _params$internalProps2,\n    selectedSectionsProp = _params$internalProps.selectedSections,\n    onSelectedSectionsChange = _params$internalProps.onSelectedSectionsChange,\n    _params$internalProps3 = _params$internalProps.shouldRespectLeadingZeros,\n    shouldRespectLeadingZeros = _params$internalProps3 === void 0 ? false : _params$internalProps3,\n    timezoneProp = _params$internalProps.timezone;\n  var _useValueWithTimezone = useValueWithTimezone({\n      timezone: timezoneProp,\n      value: valueProp,\n      defaultValue: defaultValue,\n      onChange: onChange,\n      valueManager: valueManager\n    }),\n    timezone = _useValueWithTimezone.timezone,\n    valueFromTheOutside = _useValueWithTimezone.value,\n    handleValueChange = _useValueWithTimezone.handleValueChange;\n  var sectionsValueBoundaries = React.useMemo(function () {\n    return getSectionsBoundaries(utils, timezone);\n  }, [utils, timezone]);\n  var getSectionsFromValue = React.useCallback(function (value) {\n    var fallbackSections = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n    return fieldValueManager.getSectionsFromValue(utils, value, fallbackSections, isRTL, function (date) {\n      return splitFormatIntoSections(utils, timezone, localeText, format, date, formatDensity, shouldRespectLeadingZeros, isRTL);\n    });\n  }, [fieldValueManager, format, localeText, isRTL, shouldRespectLeadingZeros, utils, formatDensity, timezone]);\n  var placeholder = React.useMemo(function () {\n    return fieldValueManager.getValueStrFromSections(getSectionsFromValue(valueManager.emptyValue), isRTL);\n  }, [fieldValueManager, getSectionsFromValue, valueManager.emptyValue, isRTL]);\n  var _React$useState = React.useState(function () {\n      var sections = getSectionsFromValue(valueFromTheOutside);\n      validateSections(sections, valueType);\n      var stateWithoutReferenceDate = {\n        sections: sections,\n        value: valueFromTheOutside,\n        referenceValue: valueManager.emptyValue,\n        tempValueStrAndroid: null\n      };\n      var granularity = getSectionTypeGranularity(sections);\n      var referenceValue = valueManager.getInitialReferenceValue({\n        referenceDate: referenceDateProp,\n        value: valueFromTheOutside,\n        utils: utils,\n        props: internalProps,\n        granularity: granularity,\n        timezone: timezone\n      });\n      return _extends({}, stateWithoutReferenceDate, {\n        referenceValue: referenceValue\n      });\n    }),\n    _React$useState2 = _slicedToArray(_React$useState, 2),\n    state = _React$useState2[0],\n    setState = _React$useState2[1];\n  var _useControlled = useControlled({\n      controlled: selectedSectionsProp,\n      default: null,\n      name: 'useField',\n      state: 'selectedSectionIndexes'\n    }),\n    _useControlled2 = _slicedToArray(_useControlled, 2),\n    selectedSections = _useControlled2[0],\n    innerSetSelectedSections = _useControlled2[1];\n  var setSelectedSections = function setSelectedSections(newSelectedSections) {\n    innerSetSelectedSections(newSelectedSections);\n    onSelectedSectionsChange == null ? void 0 : onSelectedSectionsChange(newSelectedSections);\n    setState(function (prevState) {\n      return _extends({}, prevState, {\n        selectedSectionQuery: null\n      });\n    });\n  };\n  var selectedSectionIndexes = React.useMemo(function () {\n    if (selectedSections == null) {\n      return null;\n    }\n    if (selectedSections === 'all') {\n      return {\n        startIndex: 0,\n        endIndex: state.sections.length - 1,\n        shouldSelectBoundarySelectors: true\n      };\n    }\n    if (typeof selectedSections === 'number') {\n      return {\n        startIndex: selectedSections,\n        endIndex: selectedSections\n      };\n    }\n    if (typeof selectedSections === 'string') {\n      var selectedSectionIndex = state.sections.findIndex(function (section) {\n        return section.type === selectedSections;\n      });\n      return {\n        startIndex: selectedSectionIndex,\n        endIndex: selectedSectionIndex\n      };\n    }\n    return selectedSections;\n  }, [selectedSections, state.sections]);\n  var publishValue = function publishValue(_ref) {\n    var value = _ref.value,\n      referenceValue = _ref.referenceValue,\n      sections = _ref.sections;\n    setState(function (prevState) {\n      return _extends({}, prevState, {\n        sections: sections,\n        value: value,\n        referenceValue: referenceValue,\n        tempValueStrAndroid: null\n      });\n    });\n    var context = {\n      validationError: validator({\n        adapter: adapter,\n        value: value,\n        props: _extends({}, internalProps, {\n          value: value,\n          timezone: timezone\n        })\n      })\n    };\n    handleValueChange(value, context);\n  };\n  var setSectionValue = function setSectionValue(sectionIndex, newSectionValue) {\n    var newSections = _toConsumableArray(state.sections);\n    newSections[sectionIndex] = _extends({}, newSections[sectionIndex], {\n      value: newSectionValue,\n      modified: true\n    });\n    return addPositionPropertiesToSections(newSections, isRTL);\n  };\n  var clearValue = function clearValue() {\n    if (valueManager.areValuesEqual(utils, state.value, valueManager.emptyValue)) {\n      return;\n    }\n    publishValue({\n      value: valueManager.emptyValue,\n      referenceValue: state.referenceValue,\n      sections: getSectionsFromValue(valueManager.emptyValue)\n    });\n  };\n  var clearActiveSection = function clearActiveSection() {\n    if (selectedSectionIndexes == null) {\n      return;\n    }\n    var activeSection = state.sections[selectedSectionIndexes.startIndex];\n    if (activeSection.value === '') {\n      return;\n    }\n    var activeDateManager = fieldValueManager.getActiveDateManager(utils, state, activeSection);\n    var nonEmptySectionCountBefore = activeDateManager.getSections(state.sections).filter(function (section) {\n      return section.value !== '';\n    }).length;\n    var isTheOnlyNonEmptySection = nonEmptySectionCountBefore === 1;\n    var newSections = setSectionValue(selectedSectionIndexes.startIndex, '');\n    var newActiveDate = isTheOnlyNonEmptySection ? null : utils.date(new Date(''));\n    var newValues = activeDateManager.getNewValuesFromNewActiveDate(newActiveDate);\n    if ((newActiveDate != null && !utils.isValid(newActiveDate)) !== (activeDateManager.date != null && !utils.isValid(activeDateManager.date))) {\n      publishValue(_extends({}, newValues, {\n        sections: newSections\n      }));\n    } else {\n      setState(function (prevState) {\n        return _extends({}, prevState, newValues, {\n          sections: newSections,\n          tempValueStrAndroid: null\n        });\n      });\n    }\n  };\n  var updateValueFromValueStr = function updateValueFromValueStr(valueStr) {\n    var parseDateStr = function parseDateStr(dateStr, referenceDate) {\n      var date = utils.parse(dateStr, format);\n      if (date == null || !utils.isValid(date)) {\n        return null;\n      }\n      var sections = splitFormatIntoSections(utils, timezone, localeText, format, date, formatDensity, shouldRespectLeadingZeros, isRTL);\n      return mergeDateIntoReferenceDate(utils, timezone, date, sections, referenceDate, false);\n    };\n    var newValue = fieldValueManager.parseValueStr(valueStr, state.referenceValue, parseDateStr);\n    var newReferenceValue = fieldValueManager.updateReferenceValue(utils, newValue, state.referenceValue);\n    publishValue({\n      value: newValue,\n      referenceValue: newReferenceValue,\n      sections: getSectionsFromValue(newValue, state.sections)\n    });\n  };\n  var updateSectionValue = function updateSectionValue(_ref2) {\n    var activeSection = _ref2.activeSection,\n      newSectionValue = _ref2.newSectionValue,\n      shouldGoToNextSection = _ref2.shouldGoToNextSection;\n    /**\n     * 1. Decide which section should be focused\n     */\n    if (shouldGoToNextSection && selectedSectionIndexes && selectedSectionIndexes.startIndex < state.sections.length - 1) {\n      setSelectedSections(selectedSectionIndexes.startIndex + 1);\n    } else if (selectedSectionIndexes && selectedSectionIndexes.startIndex !== selectedSectionIndexes.endIndex) {\n      setSelectedSections(selectedSectionIndexes.startIndex);\n    }\n\n    /**\n     * 2. Try to build a valid date from the new section value\n     */\n    var activeDateManager = fieldValueManager.getActiveDateManager(utils, state, activeSection);\n    var newSections = setSectionValue(selectedSectionIndexes.startIndex, newSectionValue);\n    var newActiveDateSections = activeDateManager.getSections(newSections);\n    var newActiveDate = getDateFromDateSections(utils, newActiveDateSections);\n    var shouldRegenSections = false;\n\n    /**\n     * If the date is invalid,\n     * Then we can try to clamp the day section to see if that produces a valid date.\n     * This can be useful if the month has fewer days than the day value currently provided.\n     */\n    if (!utils.isValid(newActiveDate)) {\n      var clampedSections = clampDaySectionIfPossible(utils, timezone, newActiveDateSections, sectionsValueBoundaries);\n      if (clampedSections != null) {\n        shouldRegenSections = true;\n        newActiveDate = getDateFromDateSections(utils, clampedSections);\n      }\n    }\n    var values;\n    var shouldPublish;\n\n    /**\n     * If the new date is valid,\n     * Then we merge the value of the modified sections into the reference date.\n     * This makes sure that we don't lose some information of the initial date (like the time on a date field).\n     */\n    if (newActiveDate != null && utils.isValid(newActiveDate)) {\n      var mergedDate = mergeDateIntoReferenceDate(utils, timezone, newActiveDate, newActiveDateSections, activeDateManager.referenceDate, true);\n      values = activeDateManager.getNewValuesFromNewActiveDate(mergedDate);\n      shouldPublish = true;\n    } else {\n      values = activeDateManager.getNewValuesFromNewActiveDate(newActiveDate);\n      shouldPublish = (newActiveDate != null && !utils.isValid(newActiveDate)) !== (activeDateManager.date != null && !utils.isValid(activeDateManager.date));\n    }\n\n    /**\n     * If the value has been modified (to clamp the day).\n     * Then we need to re-generate the sections to make sure they also have this change.\n     */\n    var sections = shouldRegenSections ? getSectionsFromValue(values.value, state.sections) : newSections;\n\n    /**\n     * Publish or update the internal state with the new value and sections.\n     */\n    if (shouldPublish) {\n      return publishValue(_extends({}, values, {\n        sections: sections\n      }));\n    }\n    return setState(function (prevState) {\n      return _extends({}, prevState, values, {\n        sections: sections,\n        tempValueStrAndroid: null\n      });\n    });\n  };\n  var setTempAndroidValueStr = function setTempAndroidValueStr(tempValueStrAndroid) {\n    return setState(function (prev) {\n      return _extends({}, prev, {\n        tempValueStrAndroid: tempValueStrAndroid\n      });\n    });\n  };\n  React.useEffect(function () {\n    var sections = getSectionsFromValue(state.value);\n    validateSections(sections, valueType);\n    setState(function (prevState) {\n      return _extends({}, prevState, {\n        sections: sections\n      });\n    });\n  }, [format, utils.locale]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  React.useEffect(function () {\n    var shouldUpdate = false;\n    if (!valueManager.areValuesEqual(utils, state.value, valueFromTheOutside)) {\n      shouldUpdate = true;\n    } else {\n      shouldUpdate = valueManager.getTimezone(utils, state.value) !== valueManager.getTimezone(utils, valueFromTheOutside);\n    }\n    if (shouldUpdate) {\n      setState(function (prevState) {\n        return _extends({}, prevState, {\n          value: valueFromTheOutside,\n          referenceValue: fieldValueManager.updateReferenceValue(utils, valueFromTheOutside, prevState.referenceValue),\n          sections: getSectionsFromValue(valueFromTheOutside)\n        });\n      });\n    }\n  }, [valueFromTheOutside]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  return {\n    state: state,\n    selectedSectionIndexes: selectedSectionIndexes,\n    setSelectedSections: setSelectedSections,\n    clearValue: clearValue,\n    clearActiveSection: clearActiveSection,\n    updateSectionValue: updateSectionValue,\n    updateValueFromValueStr: updateValueFromValueStr,\n    setTempAndroidValueStr: setTempAndroidValueStr,\n    sectionsValueBoundaries: sectionsValueBoundaries,\n    placeholder: placeholder,\n    timezone: timezone\n  };\n};","map":{"version":3,"names":["_extends","React","useControlled","useTheme","useUtils","useLocaleText","useLocalizationContext","addPositionPropertiesToSections","splitFormatIntoSections","clampDaySectionIfPossible","mergeDateIntoReferenceDate","getSectionsBoundaries","validateSections","getDateFromDateSections","useValueWithTimezone","getSectionTypeGranularity","useFieldState","params","utils","localeText","adapter","theme","isRTL","direction","valueManager","fieldValueManager","valueType","validator","internalProps","_params$internalProps","valueProp","value","defaultValue","referenceDateProp","referenceDate","onChange","format","_params$internalProps2","formatDensity","selectedSectionsProp","selectedSections","onSelectedSectionsChange","_params$internalProps3","shouldRespectLeadingZeros","timezoneProp","timezone","_useValueWithTimezone","valueFromTheOutside","handleValueChange","sectionsValueBoundaries","useMemo","getSectionsFromValue","useCallback","fallbackSections","arguments","length","undefined","date","placeholder","getValueStrFromSections","emptyValue","_React$useState","useState","sections","stateWithoutReferenceDate","referenceValue","tempValueStrAndroid","granularity","getInitialReferenceValue","props","_React$useState2","_slicedToArray","state","setState","_useControlled","controlled","default","name","_useControlled2","innerSetSelectedSections","setSelectedSections","newSelectedSections","prevState","selectedSectionQuery","selectedSectionIndexes","startIndex","endIndex","shouldSelectBoundarySelectors","selectedSectionIndex","findIndex","section","type","publishValue","_ref","context","validationError","setSectionValue","sectionIndex","newSectionValue","newSections","_toConsumableArray","modified","clearValue","areValuesEqual","clearActiveSection","activeSection","activeDateManager","getActiveDateManager","nonEmptySectionCountBefore","getSections","filter","isTheOnlyNonEmptySection","newActiveDate","Date","newValues","getNewValuesFromNewActiveDate","isValid","updateValueFromValueStr","valueStr","parseDateStr","dateStr","parse","newValue","parseValueStr","newReferenceValue","updateReferenceValue","updateSectionValue","_ref2","shouldGoToNextSection","newActiveDateSections","shouldRegenSections","clampedSections","values","shouldPublish","mergedDate","setTempAndroidValueStr","prev","useEffect","locale","shouldUpdate","getTimezone"],"sources":["C:/Users/carax/Desktop/SideProject/SFDB-Project/front/node_modules/@mui/x-date-pickers/internals/hooks/useField/useFieldState.js"],"sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport * as React from 'react';\nimport useControlled from '@mui/utils/useControlled';\nimport { useTheme } from '@mui/material/styles';\nimport { useUtils, useLocaleText, useLocalizationContext } from '../useUtils';\nimport { addPositionPropertiesToSections, splitFormatIntoSections, clampDaySectionIfPossible, mergeDateIntoReferenceDate, getSectionsBoundaries, validateSections, getDateFromDateSections } from './useField.utils';\nimport { useValueWithTimezone } from '../useValueWithTimezone';\nimport { getSectionTypeGranularity } from '../../utils/getDefaultReferenceDate';\nexport const useFieldState = params => {\n  const utils = useUtils();\n  const localeText = useLocaleText();\n  const adapter = useLocalizationContext();\n  const theme = useTheme();\n  const isRTL = theme.direction === 'rtl';\n  const {\n    valueManager,\n    fieldValueManager,\n    valueType,\n    validator,\n    internalProps,\n    internalProps: {\n      value: valueProp,\n      defaultValue,\n      referenceDate: referenceDateProp,\n      onChange,\n      format,\n      formatDensity = 'dense',\n      selectedSections: selectedSectionsProp,\n      onSelectedSectionsChange,\n      shouldRespectLeadingZeros = false,\n      timezone: timezoneProp\n    }\n  } = params;\n  const {\n    timezone,\n    value: valueFromTheOutside,\n    handleValueChange\n  } = useValueWithTimezone({\n    timezone: timezoneProp,\n    value: valueProp,\n    defaultValue,\n    onChange,\n    valueManager\n  });\n  const sectionsValueBoundaries = React.useMemo(() => getSectionsBoundaries(utils, timezone), [utils, timezone]);\n  const getSectionsFromValue = React.useCallback((value, fallbackSections = null) => fieldValueManager.getSectionsFromValue(utils, value, fallbackSections, isRTL, date => splitFormatIntoSections(utils, timezone, localeText, format, date, formatDensity, shouldRespectLeadingZeros, isRTL)), [fieldValueManager, format, localeText, isRTL, shouldRespectLeadingZeros, utils, formatDensity, timezone]);\n  const placeholder = React.useMemo(() => fieldValueManager.getValueStrFromSections(getSectionsFromValue(valueManager.emptyValue), isRTL), [fieldValueManager, getSectionsFromValue, valueManager.emptyValue, isRTL]);\n  const [state, setState] = React.useState(() => {\n    const sections = getSectionsFromValue(valueFromTheOutside);\n    validateSections(sections, valueType);\n    const stateWithoutReferenceDate = {\n      sections,\n      value: valueFromTheOutside,\n      referenceValue: valueManager.emptyValue,\n      tempValueStrAndroid: null\n    };\n    const granularity = getSectionTypeGranularity(sections);\n    const referenceValue = valueManager.getInitialReferenceValue({\n      referenceDate: referenceDateProp,\n      value: valueFromTheOutside,\n      utils,\n      props: internalProps,\n      granularity,\n      timezone\n    });\n    return _extends({}, stateWithoutReferenceDate, {\n      referenceValue\n    });\n  });\n  const [selectedSections, innerSetSelectedSections] = useControlled({\n    controlled: selectedSectionsProp,\n    default: null,\n    name: 'useField',\n    state: 'selectedSectionIndexes'\n  });\n  const setSelectedSections = newSelectedSections => {\n    innerSetSelectedSections(newSelectedSections);\n    onSelectedSectionsChange == null ? void 0 : onSelectedSectionsChange(newSelectedSections);\n    setState(prevState => _extends({}, prevState, {\n      selectedSectionQuery: null\n    }));\n  };\n  const selectedSectionIndexes = React.useMemo(() => {\n    if (selectedSections == null) {\n      return null;\n    }\n    if (selectedSections === 'all') {\n      return {\n        startIndex: 0,\n        endIndex: state.sections.length - 1,\n        shouldSelectBoundarySelectors: true\n      };\n    }\n    if (typeof selectedSections === 'number') {\n      return {\n        startIndex: selectedSections,\n        endIndex: selectedSections\n      };\n    }\n    if (typeof selectedSections === 'string') {\n      const selectedSectionIndex = state.sections.findIndex(section => section.type === selectedSections);\n      return {\n        startIndex: selectedSectionIndex,\n        endIndex: selectedSectionIndex\n      };\n    }\n    return selectedSections;\n  }, [selectedSections, state.sections]);\n  const publishValue = ({\n    value,\n    referenceValue,\n    sections\n  }) => {\n    setState(prevState => _extends({}, prevState, {\n      sections,\n      value,\n      referenceValue,\n      tempValueStrAndroid: null\n    }));\n    const context = {\n      validationError: validator({\n        adapter,\n        value,\n        props: _extends({}, internalProps, {\n          value,\n          timezone\n        })\n      })\n    };\n    handleValueChange(value, context);\n  };\n  const setSectionValue = (sectionIndex, newSectionValue) => {\n    const newSections = [...state.sections];\n    newSections[sectionIndex] = _extends({}, newSections[sectionIndex], {\n      value: newSectionValue,\n      modified: true\n    });\n    return addPositionPropertiesToSections(newSections, isRTL);\n  };\n  const clearValue = () => {\n    if (valueManager.areValuesEqual(utils, state.value, valueManager.emptyValue)) {\n      return;\n    }\n    publishValue({\n      value: valueManager.emptyValue,\n      referenceValue: state.referenceValue,\n      sections: getSectionsFromValue(valueManager.emptyValue)\n    });\n  };\n  const clearActiveSection = () => {\n    if (selectedSectionIndexes == null) {\n      return;\n    }\n    const activeSection = state.sections[selectedSectionIndexes.startIndex];\n    if (activeSection.value === '') {\n      return;\n    }\n    const activeDateManager = fieldValueManager.getActiveDateManager(utils, state, activeSection);\n    const nonEmptySectionCountBefore = activeDateManager.getSections(state.sections).filter(section => section.value !== '').length;\n    const isTheOnlyNonEmptySection = nonEmptySectionCountBefore === 1;\n    const newSections = setSectionValue(selectedSectionIndexes.startIndex, '');\n    const newActiveDate = isTheOnlyNonEmptySection ? null : utils.date(new Date(''));\n    const newValues = activeDateManager.getNewValuesFromNewActiveDate(newActiveDate);\n    if ((newActiveDate != null && !utils.isValid(newActiveDate)) !== (activeDateManager.date != null && !utils.isValid(activeDateManager.date))) {\n      publishValue(_extends({}, newValues, {\n        sections: newSections\n      }));\n    } else {\n      setState(prevState => _extends({}, prevState, newValues, {\n        sections: newSections,\n        tempValueStrAndroid: null\n      }));\n    }\n  };\n  const updateValueFromValueStr = valueStr => {\n    const parseDateStr = (dateStr, referenceDate) => {\n      const date = utils.parse(dateStr, format);\n      if (date == null || !utils.isValid(date)) {\n        return null;\n      }\n      const sections = splitFormatIntoSections(utils, timezone, localeText, format, date, formatDensity, shouldRespectLeadingZeros, isRTL);\n      return mergeDateIntoReferenceDate(utils, timezone, date, sections, referenceDate, false);\n    };\n    const newValue = fieldValueManager.parseValueStr(valueStr, state.referenceValue, parseDateStr);\n    const newReferenceValue = fieldValueManager.updateReferenceValue(utils, newValue, state.referenceValue);\n    publishValue({\n      value: newValue,\n      referenceValue: newReferenceValue,\n      sections: getSectionsFromValue(newValue, state.sections)\n    });\n  };\n  const updateSectionValue = ({\n    activeSection,\n    newSectionValue,\n    shouldGoToNextSection\n  }) => {\n    /**\n     * 1. Decide which section should be focused\n     */\n    if (shouldGoToNextSection && selectedSectionIndexes && selectedSectionIndexes.startIndex < state.sections.length - 1) {\n      setSelectedSections(selectedSectionIndexes.startIndex + 1);\n    } else if (selectedSectionIndexes && selectedSectionIndexes.startIndex !== selectedSectionIndexes.endIndex) {\n      setSelectedSections(selectedSectionIndexes.startIndex);\n    }\n\n    /**\n     * 2. Try to build a valid date from the new section value\n     */\n    const activeDateManager = fieldValueManager.getActiveDateManager(utils, state, activeSection);\n    const newSections = setSectionValue(selectedSectionIndexes.startIndex, newSectionValue);\n    const newActiveDateSections = activeDateManager.getSections(newSections);\n    let newActiveDate = getDateFromDateSections(utils, newActiveDateSections);\n    let shouldRegenSections = false;\n\n    /**\n     * If the date is invalid,\n     * Then we can try to clamp the day section to see if that produces a valid date.\n     * This can be useful if the month has fewer days than the day value currently provided.\n     */\n    if (!utils.isValid(newActiveDate)) {\n      const clampedSections = clampDaySectionIfPossible(utils, timezone, newActiveDateSections, sectionsValueBoundaries);\n      if (clampedSections != null) {\n        shouldRegenSections = true;\n        newActiveDate = getDateFromDateSections(utils, clampedSections);\n      }\n    }\n    let values;\n    let shouldPublish;\n\n    /**\n     * If the new date is valid,\n     * Then we merge the value of the modified sections into the reference date.\n     * This makes sure that we don't lose some information of the initial date (like the time on a date field).\n     */\n    if (newActiveDate != null && utils.isValid(newActiveDate)) {\n      const mergedDate = mergeDateIntoReferenceDate(utils, timezone, newActiveDate, newActiveDateSections, activeDateManager.referenceDate, true);\n      values = activeDateManager.getNewValuesFromNewActiveDate(mergedDate);\n      shouldPublish = true;\n    } else {\n      values = activeDateManager.getNewValuesFromNewActiveDate(newActiveDate);\n      shouldPublish = (newActiveDate != null && !utils.isValid(newActiveDate)) !== (activeDateManager.date != null && !utils.isValid(activeDateManager.date));\n    }\n\n    /**\n     * If the value has been modified (to clamp the day).\n     * Then we need to re-generate the sections to make sure they also have this change.\n     */\n    const sections = shouldRegenSections ? getSectionsFromValue(values.value, state.sections) : newSections;\n\n    /**\n     * Publish or update the internal state with the new value and sections.\n     */\n    if (shouldPublish) {\n      return publishValue(_extends({}, values, {\n        sections\n      }));\n    }\n    return setState(prevState => _extends({}, prevState, values, {\n      sections,\n      tempValueStrAndroid: null\n    }));\n  };\n  const setTempAndroidValueStr = tempValueStrAndroid => setState(prev => _extends({}, prev, {\n    tempValueStrAndroid\n  }));\n  React.useEffect(() => {\n    const sections = getSectionsFromValue(state.value);\n    validateSections(sections, valueType);\n    setState(prevState => _extends({}, prevState, {\n      sections\n    }));\n  }, [format, utils.locale]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  React.useEffect(() => {\n    let shouldUpdate = false;\n    if (!valueManager.areValuesEqual(utils, state.value, valueFromTheOutside)) {\n      shouldUpdate = true;\n    } else {\n      shouldUpdate = valueManager.getTimezone(utils, state.value) !== valueManager.getTimezone(utils, valueFromTheOutside);\n    }\n    if (shouldUpdate) {\n      setState(prevState => _extends({}, prevState, {\n        value: valueFromTheOutside,\n        referenceValue: fieldValueManager.updateReferenceValue(utils, valueFromTheOutside, prevState.referenceValue),\n        sections: getSectionsFromValue(valueFromTheOutside)\n      }));\n    }\n  }, [valueFromTheOutside]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  return {\n    state,\n    selectedSectionIndexes,\n    setSelectedSections,\n    clearValue,\n    clearActiveSection,\n    updateSectionValue,\n    updateValueFromValueStr,\n    setTempAndroidValueStr,\n    sectionsValueBoundaries,\n    placeholder,\n    timezone\n  };\n};"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}