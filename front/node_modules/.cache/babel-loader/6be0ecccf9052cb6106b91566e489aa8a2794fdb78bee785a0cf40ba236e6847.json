{"ast":null,"code":"import _objectSpread from\"C:/Users/carax/Desktop/SideProject/SFDB-Project/front/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"C:/Users/carax/Desktop/SideProject/SFDB-Project/front/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/carax/Desktop/SideProject/SFDB-Project/front/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/carax/Desktop/SideProject/SFDB-Project/front/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import{recommendMoviesDB}from'../../axios/main/movieLogic';import{Card,CardContent,Grid,IconButton,Tooltip,Typography}from'@mui/material';import InfoIcon from'@mui/icons-material/Info';import Slider from'react-slick';import{useNavigate}from'react-router';import{firebaseStorage}from'../../utils/firebase';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var MainMidSection=function MainMidSection(){var navigate=useNavigate();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),recommendMovies=_useState2[0],setRecommendMovies=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),posterUrls=_useState4[0],setPosterUrls=_useState4[1];useEffect(function(){var getRecommendMovies=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var res;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return recommendMoviesDB();case 3:res=_context.sent;setRecommendMovies(res);_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);console.error('추천영화 로드 실패:',_context.t0);case 10:case\"end\":return _context.stop();}},_callee,null,[[0,7]]);}));return function getRecommendMovies(){return _ref.apply(this,arguments);};}();getRecommendMovies();},[]);useEffect(function(){var getPosterUrls=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(){var urls;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.next=2;return Promise.all(recommendMovies.map(/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(movie){var storageRef,url;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:storageRef=firebaseStorage.ref(\"poster/\".concat(movie.movieId).concat(movie.movieSeq,\".jpg\"));_context2.prev=1;_context2.next=4;return storageRef.getDownloadURL();case 4:url=_context2.sent;return _context2.abrupt(\"return\",url);case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](1);console.log(\"포스터 URL 페칭 에러 : \",_context2.t0);return _context2.abrupt(\"return\",null);case 12:case\"end\":return _context2.stop();}},_callee2,null,[[1,8]]);}));return function(_x){return _ref3.apply(this,arguments);};}()));case 2:urls=_context3.sent;setPosterUrls(urls);case 4:case\"end\":return _context3.stop();}},_callee3);}));return function getPosterUrls(){return _ref2.apply(this,arguments);};}();getPosterUrls();},[recommendMovies]);var settings={dots:true,arrows:true,infinite:true,speed:500,slidesToShow:5,slidesToScroll:5};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',justifyContent:'center',marginBottom:'16px',marginRight:'1250px'},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",sx:{fontSize:25},children:\"\\uCD94\\uCC9C SF \\uC601\\uD654\"}),/*#__PURE__*/_jsx(Tooltip,{title:\"\\uC653\\uCC60\\uD53C\\uB514\\uC544 \\uAE30\\uC900 \\uD3C9\\uAC00 \\uC218 10\\uB9CC \\uC774\\uD558\\uC758 \\uC791\\uD488 \\uC911 \\uAC00\\uC7A5 \\uB192\\uC740 \\uD3C9\\uADE0 \\uBCC4\\uC810\\uC744 \\uBC1B\\uC740 \\uC601\\uD654\\uB4E4\\uC785\\uB2C8\\uB2E4.\",placement:\"right\",children:/*#__PURE__*/_jsx(IconButton,{children:/*#__PURE__*/_jsx(InfoIcon,{})})})]}),/*#__PURE__*/_jsx(Slider,_objectSpread(_objectSpread({},settings),{},{children:recommendMovies.map(function(movie,index){return/*#__PURE__*/_jsx(\"div\",{style:{position:'relative'},children:/*#__PURE__*/_jsxs(Card,{sx:{maxWidth:250,height:450,mx:2,border:'none',margin:'0 auto',cursor:'pointer'},onClick:function onClick(){return navigate(\"/movieDetail/\".concat(movie.movieId).concat(movie.movieSeq));},children:[/*#__PURE__*/_jsx(\"img\",{src:posterUrls[index],alt:movie.title,style:{width:'100%',height:'350px',borderRadius:'3px 3px 3px 3px'}}),/*#__PURE__*/_jsxs(CardContent,{style:{border:'none',display:'flex',flexDirection:'column',justifyContent:'flex-start'},children:[/*#__PURE__*/_jsx(Typography,{variant:\"subtitle2\",sx:{fontSize:15},children:movie.title.length>18?\"\".concat(movie.title.slice(0,18),\"...\"):movie.title}),/*#__PURE__*/_jsx(Grid,{container:true,justifyContent:\"flex-start\",style:{marginTop:'5px'},children:/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",children:[movie.prodYear,\" \\xB7 \",movie.nation]})}),/*#__PURE__*/_jsxs(Typography,{variant:\"caption\",style:{marginTop:'5px'},children:[\" \",movie.directorNms,\" \"]})]})]})},index);})}))]})});};export default MainMidSection;","map":{"version":3,"names":["React","useEffect","useState","recommendMoviesDB","Card","CardContent","Grid","IconButton","Tooltip","Typography","InfoIcon","Slider","useNavigate","firebaseStorage","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","MainMidSection","navigate","_useState","_useState2","_slicedToArray","recommendMovies","setRecommendMovies","_useState3","_useState4","posterUrls","setPosterUrls","getRecommendMovies","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","res","wrap","_callee$","_context","prev","next","sent","t0","console","error","stop","apply","arguments","getPosterUrls","_ref2","_callee3","urls","_callee3$","_context3","Promise","all","map","_ref3","_callee2","movie","storageRef","url","_callee2$","_context2","ref","concat","movieId","movieSeq","getDownloadURL","abrupt","log","_x","settings","dots","arrows","infinite","speed","slidesToShow","slidesToScroll","children","style","display","alignItems","justifyContent","marginBottom","marginRight","variant","sx","fontSize","title","placement","_objectSpread","index","position","maxWidth","height","mx","border","margin","cursor","onClick","src","alt","width","borderRadius","flexDirection","length","slice","container","marginTop","prodYear","nation","directorNms"],"sources":["C:/Users/carax/Desktop/SideProject/SFDB-Project/front/src/pages/main/MainMidSection.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport { recommendMoviesDB } from '../../axios/main/movieLogic';\r\nimport { Card, CardContent, Grid, IconButton, Tooltip, Typography } from '@mui/material';\r\nimport InfoIcon from '@mui/icons-material/Info';\r\nimport Slider from 'react-slick';\r\nimport { useNavigate } from 'react-router';\r\nimport { firebaseStorage } from '../../utils/firebase';\r\n\r\nconst MainMidSection = () => {\r\n   const navigate = useNavigate()\r\n   const [recommendMovies, setRecommendMovies] = useState([]);\r\n   const [posterUrls , setPosterUrls] = useState([])\r\n\r\n  useEffect(() => {\r\n    const getRecommendMovies = async () => {\r\n      try {\r\n        const res = await recommendMoviesDB();\r\n        setRecommendMovies(res);\r\n      } catch (error) {\r\n        console.error('추천영화 로드 실패:', error);\r\n      }\r\n    };\r\n    getRecommendMovies();\r\n  }, []);\r\n\r\n\r\n\r\n  useEffect(() => {\r\n    const getPosterUrls = async () => {\r\n      const urls = await Promise.all(recommendMovies.map(async (movie) => {\r\n        const storageRef = firebaseStorage.ref(`poster/${movie.movieId}${movie.movieSeq}.jpg`);\r\n        try {\r\n          const url = await storageRef.getDownloadURL();\r\n          return url;\r\n        } catch (error) {\r\n          console.log(\"포스터 URL 페칭 에러 : \" , error);\r\n          return null;\r\n        }\r\n      }));\r\n      setPosterUrls(urls);\r\n    };\r\n\r\n    getPosterUrls();\r\n  }, [recommendMovies]);\r\n\r\n\r\n\r\n  const settings = {\r\n    dots: true,\r\n    arrows : true,\r\n    infinite: true,\r\n    speed: 500,\r\n    slidesToShow: 5,\r\n    slidesToScroll: 5\r\n  };\r\n\r\n  \r\n\r\n\r\n  return (\r\n    <> \r\n    <div>\r\n      <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'center', marginBottom: '16px' , marginRight:'1250px' }}>\r\n        <Typography variant=\"h6\" sx={{ fontSize: 25 }}>추천 SF 영화</Typography>\r\n        <Tooltip title=\"왓챠피디아 기준 평가 수 10만 이하의 작품 중 가장 높은 평균 별점을 받은 영화들입니다.\" placement=\"right\">\r\n          <IconButton>\r\n            <InfoIcon />\r\n          </IconButton>\r\n        </Tooltip>\r\n      </div>\r\n    <Slider {...settings}>\r\n      {recommendMovies.map((movie, index) => (\r\n        <div key={index} style={{ position: 'relative' }}>\r\n          <Card sx={{ maxWidth: 250, height: 450 ,mx: 2 , border:'none' , margin: '0 auto', cursor:'pointer'}}\r\n          onClick={() => navigate(`/movieDetail/${movie.movieId}${movie.movieSeq}`)}>\r\n          \r\n            <img src={posterUrls[index]} alt={movie.title} style={{ width: '100%', height: '350px' , borderRadius:'3px 3px 3px 3px' }} />\r\n          \r\n            <CardContent style={{ border:'none', display: 'flex', flexDirection: 'column', justifyContent: 'flex-start' }}>\r\n              <Typography variant=\"subtitle2\" sx={{fontSize:15}}>{movie.title.length > 18 ? `${movie.title.slice(0, 18)}...` : movie.title}</Typography>\r\n          \r\n              <Grid container justifyContent=\"flex-start\" style={{marginTop:'5px'}}>\r\n                <Typography variant=\"body2\">{movie.prodYear} · {movie.nation}</Typography>\r\n              </Grid>\r\n          \r\n              <Typography variant=\"caption\" style={{marginTop:'5px'}}> {movie.directorNms} </Typography>\r\n            </CardContent>\r\n          \r\n          </Card>\r\n        </div>\r\n      ))}\r\n    </Slider>\r\n  </div>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default MainMidSection"],"mappings":"2jBAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,OAASC,iBAAiB,KAAQ,6BAA6B,CAC/D,OAASC,IAAI,CAAEC,WAAW,CAAEC,IAAI,CAAEC,UAAU,CAAEC,OAAO,CAAEC,UAAU,KAAQ,eAAe,CACxF,MAAO,CAAAC,QAAQ,KAAM,0BAA0B,CAC/C,MAAO,CAAAC,MAAM,KAAM,aAAa,CAChC,OAASC,WAAW,KAAQ,cAAc,CAC1C,OAASC,eAAe,KAAQ,sBAAsB,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,gCAAAC,QAAA,IAAAC,SAAA,yBAEvD,GAAM,CAAAC,cAAc,CAAG,QAAjB,CAAAA,cAAcA,CAAA,CAAS,CAC1B,GAAM,CAAAC,QAAQ,CAAGT,WAAW,CAAC,CAAC,CAC9B,IAAAU,SAAA,CAA8CpB,QAAQ,CAAC,EAAE,CAAC,CAAAqB,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAAnDG,eAAe,CAAAF,UAAA,IAAEG,kBAAkB,CAAAH,UAAA,IAC1C,IAAAI,UAAA,CAAqCzB,QAAQ,CAAC,EAAE,CAAC,CAAA0B,UAAA,CAAAJ,cAAA,CAAAG,UAAA,IAA1CE,UAAU,CAAAD,UAAA,IAAGE,aAAa,CAAAF,UAAA,IAElC3B,SAAS,CAAC,UAAM,CACd,GAAM,CAAA8B,kBAAkB,6BAAAC,IAAA,CAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAC,QAAA,MAAAC,GAAA,QAAAH,mBAAA,GAAAI,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SAAAF,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA,SAEL,CAAAvC,iBAAiB,CAAC,CAAC,QAA/BkC,GAAG,CAAAG,QAAA,CAAAG,IAAA,CACTjB,kBAAkB,CAACW,GAAG,CAAC,CAACG,QAAA,CAAAE,IAAA,iBAAAF,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAI,EAAA,CAAAJ,QAAA,aAExBK,OAAO,CAACC,KAAK,CAAC,aAAa,CAAAN,QAAA,CAAAI,EAAO,CAAC,CAAC,yBAAAJ,QAAA,CAAAO,IAAA,MAAAX,OAAA,gBAEvC,kBAPK,CAAAL,kBAAkBA,CAAA,SAAAC,IAAA,CAAAgB,KAAA,MAAAC,SAAA,OAOvB,CACDlB,kBAAkB,CAAC,CAAC,CACtB,CAAC,CAAE,EAAE,CAAC,CAIN9B,SAAS,CAAC,UAAM,CACd,GAAM,CAAAiD,aAAa,6BAAAC,KAAA,CAAAlB,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAiB,SAAA,MAAAC,IAAA,QAAAnB,mBAAA,GAAAI,IAAA,UAAAgB,UAAAC,SAAA,iBAAAA,SAAA,CAAAd,IAAA,CAAAc,SAAA,CAAAb,IAAA,SAAAa,SAAA,CAAAb,IAAA,SACD,CAAAc,OAAO,CAACC,GAAG,CAAChC,eAAe,CAACiC,GAAG,6BAAAC,KAAA,CAAA1B,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAC,SAAAyB,SAAOC,KAAK,MAAAC,UAAA,CAAAC,GAAA,QAAA7B,mBAAA,GAAAI,IAAA,UAAA0B,UAAAC,SAAA,iBAAAA,SAAA,CAAAxB,IAAA,CAAAwB,SAAA,CAAAvB,IAAA,SACvDoB,UAAU,CAAGjD,eAAe,CAACqD,GAAG,WAAAC,MAAA,CAAWN,KAAK,CAACO,OAAO,EAAAD,MAAA,CAAGN,KAAK,CAACQ,QAAQ,QAAM,CAAC,CAAAJ,SAAA,CAAAxB,IAAA,GAAAwB,SAAA,CAAAvB,IAAA,SAElE,CAAAoB,UAAU,CAACQ,cAAc,CAAC,CAAC,QAAvCP,GAAG,CAAAE,SAAA,CAAAtB,IAAA,QAAAsB,SAAA,CAAAM,MAAA,UACFR,GAAG,SAAAE,SAAA,CAAAxB,IAAA,GAAAwB,SAAA,CAAArB,EAAA,CAAAqB,SAAA,aAEVpB,OAAO,CAAC2B,GAAG,CAAC,kBAAkB,CAAAP,SAAA,CAAArB,EAAQ,CAAC,CAAC,OAAAqB,SAAA,CAAAM,MAAA,UACjC,IAAI,2BAAAN,SAAA,CAAAlB,IAAA,MAAAa,QAAA,gBAEd,mBAAAa,EAAA,SAAAd,KAAA,CAAAX,KAAA,MAAAC,SAAA,QAAC,CAAC,QATGI,IAAI,CAAAE,SAAA,CAAAZ,IAAA,CAUVb,aAAa,CAACuB,IAAI,CAAC,CAAC,wBAAAE,SAAA,CAAAR,IAAA,MAAAK,QAAA,GACrB,kBAZK,CAAAF,aAAaA,CAAA,SAAAC,KAAA,CAAAH,KAAA,MAAAC,SAAA,OAYlB,CAEDC,aAAa,CAAC,CAAC,CACjB,CAAC,CAAE,CAACzB,eAAe,CAAC,CAAC,CAIrB,GAAM,CAAAiD,QAAQ,CAAG,CACfC,IAAI,CAAE,IAAI,CACVC,MAAM,CAAG,IAAI,CACbC,QAAQ,CAAE,IAAI,CACdC,KAAK,CAAE,GAAG,CACVC,YAAY,CAAE,CAAC,CACfC,cAAc,CAAE,CAClB,CAAC,CAKD,mBACEjE,IAAA,CAAAI,SAAA,EAAA8D,QAAA,cACAhE,KAAA,QAAAgE,QAAA,eACEhE,KAAA,QAAKiE,KAAK,CAAE,CAAEC,OAAO,CAAE,MAAM,CAAEC,UAAU,CAAE,QAAQ,CAAEC,cAAc,CAAE,QAAQ,CAAEC,YAAY,CAAE,MAAM,CAAGC,WAAW,CAAC,QAAS,CAAE,CAAAN,QAAA,eAC3HlE,IAAA,CAACN,UAAU,EAAC+E,OAAO,CAAC,IAAI,CAACC,EAAE,CAAE,CAAEC,QAAQ,CAAE,EAAG,CAAE,CAAAT,QAAA,CAAC,8BAAQ,CAAY,CAAC,cACpElE,IAAA,CAACP,OAAO,EAACmF,KAAK,CAAC,8NAAoD,CAACC,SAAS,CAAC,OAAO,CAAAX,QAAA,cACnFlE,IAAA,CAACR,UAAU,EAAA0E,QAAA,cACTlE,IAAA,CAACL,QAAQ,GAAE,CAAC,CACF,CAAC,CACN,CAAC,EACP,CAAC,cACRK,IAAA,CAACJ,MAAM,CAAAkF,aAAA,CAAAA,aAAA,IAAKnB,QAAQ,MAAAO,QAAA,CACjBxD,eAAe,CAACiC,GAAG,CAAC,SAACG,KAAK,CAAEiC,KAAK,qBAChC/E,IAAA,QAAiBmE,KAAK,CAAE,CAAEa,QAAQ,CAAE,UAAW,CAAE,CAAAd,QAAA,cAC/ChE,KAAA,CAACb,IAAI,EAACqF,EAAE,CAAE,CAAEO,QAAQ,CAAE,GAAG,CAAEC,MAAM,CAAE,GAAG,CAAEC,EAAE,CAAE,CAAC,CAAGC,MAAM,CAAC,MAAM,CAAGC,MAAM,CAAE,QAAQ,CAAEC,MAAM,CAAC,SAAS,CAAE,CACpGC,OAAO,CAAE,SAAAA,QAAA,QAAM,CAAAjF,QAAQ,iBAAA8C,MAAA,CAAiBN,KAAK,CAACO,OAAO,EAAAD,MAAA,CAAGN,KAAK,CAACQ,QAAQ,CAAE,CAAC,EAAC,CAAAY,QAAA,eAExElE,IAAA,QAAKwF,GAAG,CAAE1E,UAAU,CAACiE,KAAK,CAAE,CAACU,GAAG,CAAE3C,KAAK,CAAC8B,KAAM,CAACT,KAAK,CAAE,CAAEuB,KAAK,CAAE,MAAM,CAAER,MAAM,CAAE,OAAO,CAAGS,YAAY,CAAC,iBAAkB,CAAE,CAAE,CAAC,cAE7HzF,KAAA,CAACZ,WAAW,EAAC6E,KAAK,CAAE,CAAEiB,MAAM,CAAC,MAAM,CAAEhB,OAAO,CAAE,MAAM,CAAEwB,aAAa,CAAE,QAAQ,CAAEtB,cAAc,CAAE,YAAa,CAAE,CAAAJ,QAAA,eAC5GlE,IAAA,CAACN,UAAU,EAAC+E,OAAO,CAAC,WAAW,CAACC,EAAE,CAAE,CAACC,QAAQ,CAAC,EAAE,CAAE,CAAAT,QAAA,CAAEpB,KAAK,CAAC8B,KAAK,CAACiB,MAAM,CAAG,EAAE,IAAAzC,MAAA,CAAMN,KAAK,CAAC8B,KAAK,CAACkB,KAAK,CAAC,CAAC,CAAE,EAAE,CAAC,QAAQhD,KAAK,CAAC8B,KAAK,CAAa,CAAC,cAE1I5E,IAAA,CAACT,IAAI,EAACwG,SAAS,MAACzB,cAAc,CAAC,YAAY,CAACH,KAAK,CAAE,CAAC6B,SAAS,CAAC,KAAK,CAAE,CAAA9B,QAAA,cACnEhE,KAAA,CAACR,UAAU,EAAC+E,OAAO,CAAC,OAAO,CAAAP,QAAA,EAAEpB,KAAK,CAACmD,QAAQ,CAAC,QAAG,CAACnD,KAAK,CAACoD,MAAM,EAAa,CAAC,CACtE,CAAC,cAEPhG,KAAA,CAACR,UAAU,EAAC+E,OAAO,CAAC,SAAS,CAACN,KAAK,CAAE,CAAC6B,SAAS,CAAC,KAAK,CAAE,CAAA9B,QAAA,EAAC,GAAC,CAACpB,KAAK,CAACqD,WAAW,CAAC,GAAC,EAAY,CAAC,EAC/E,CAAC,EAEV,CAAC,EAhBCpB,KAiBL,CAAC,EACP,CAAC,EACI,CAAC,EACN,CAAC,CACF,CAAC,CAEP,CAAC,CAED,cAAe,CAAA1E,cAAc"},"metadata":{},"sourceType":"module","externalDependencies":[]}