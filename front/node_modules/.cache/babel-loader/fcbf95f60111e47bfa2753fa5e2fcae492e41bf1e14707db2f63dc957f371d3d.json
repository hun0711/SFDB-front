{"ast":null,"code":"import _objectSpread from\"C:/Users/carax/Desktop/SideProject/SFDB-Project/front/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"C:/Users/carax/Desktop/SideProject/SFDB-Project/front/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/carax/Desktop/SideProject/SFDB-Project/front/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/carax/Desktop/SideProject/SFDB-Project/front/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import{top20sfmoviesDB}from'../../axios/main/movieLogic';import Slider from'react-slick';import\"slick-carousel/slick/slick.css\";import\"slick-carousel/slick/slick-theme.css\";import{Card,CardContent,Grid,IconButton,Tooltip,Typography}from'@mui/material';import InfoIcon from'@mui/icons-material/Info';import{useNavigate}from'react-router';import{firebaseStorage}from'../../utils/firebase';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var MainTopSection=function MainTopSection(){var navigate=useNavigate();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),top20Movies=_useState2[0],setTop20Movies=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),posterUrls=_useState4[0],setPosterUrls=_useState4[1];useEffect(function(){var getTop20SfMovies=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var res;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return top20sfmoviesDB();case 3:res=_context.sent;setTop20Movies(res);_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);console.error('top20영화 로드 실패:',_context.t0);case 10:case\"end\":return _context.stop();}},_callee,null,[[0,7]]);}));return function getTop20SfMovies(){return _ref.apply(this,arguments);};}();getTop20SfMovies();},[]);useEffect(function(){var getPosterUrls=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(){var urls;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.next=2;return Promise.all(top20Movies.map(/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(movie){var storageRef,url;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:storageRef=firebaseStorage.ref(\"poster/\".concat(movie.movieId).concat(movie.movieSeq,\".jpg\"));_context2.prev=1;_context2.next=4;return storageRef.getDownloadURL();case 4:url=_context2.sent;return _context2.abrupt(\"return\",url);case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](1);console.log(\"포스터 URL 페칭 에러 : \",_context2.t0);return _context2.abrupt(\"return\",null);case 12:case\"end\":return _context2.stop();}},_callee2,null,[[1,8]]);}));return function(_x){return _ref3.apply(this,arguments);};}()));case 2:urls=_context3.sent;setPosterUrls(urls);case 4:case\"end\":return _context3.stop();}},_callee3);}));return function getPosterUrls(){return _ref2.apply(this,arguments);};}();getPosterUrls();},[top20Movies]);var settings={dots:true,arrows:true,infinite:true,speed:500,slidesToShow:5,slidesToScroll:2,autoplay:true,autoplaySpeed:5000};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',justifyContent:'center',marginBottom:'16px',marginRight:'1200px'},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",sx:{fontSize:25},children:\"Top 20 SF \\uC601\\uD654\"}),/*#__PURE__*/_jsx(Tooltip,{title:\"\\uC653\\uCC60\\uD53C\\uB514\\uC544 \\uAE30\\uC900 \\uD3C9\\uADE0\\uBCC4\\uC810\\uC774 \\uAC00\\uC7A5 \\uB192\\uC740 20\\uAC1C\\uC758 SF \\uC601\\uD654\\uB4E4\\uC785\\uB2C8\\uB2E4.\",placement:\"right\",children:/*#__PURE__*/_jsx(IconButton,{children:/*#__PURE__*/_jsx(InfoIcon,{})})})]}),/*#__PURE__*/_jsx(Slider,_objectSpread(_objectSpread({},settings),{},{children:top20Movies.map(function(movie,index){return/*#__PURE__*/_jsx(\"div\",{style:{position:'relative'},children:/*#__PURE__*/_jsxs(Card,{sx:{maxWidth:250,height:450,mx:2,border:'none',margin:'0 auto',cursor:'pointer'},onClick:function onClick(){return navigate(\"/movieDetail/\".concat(movie.movieId).concat(movie.movieSeq));},children:[/*#__PURE__*/_jsx(\"img\",{src:posterUrls[index],alt:movie.title,style:{width:'100%',height:'350px',borderRadius:'3px 3px 3px 3px'}}),/*#__PURE__*/_jsxs(CardContent,{style:{border:'none',display:'flex',flexDirection:'column',justifyContent:'flex-start'},children:[/*#__PURE__*/_jsx(Typography,{variant:\"subtitle2\",sx:{fontSize:15},children:movie.title.length>18?\"\".concat(movie.title.slice(0,18),\"...\"):movie.title}),/*#__PURE__*/_jsx(Grid,{container:true,justifyContent:\"flex-start\",style:{marginTop:'5px'},children:/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",children:[movie.prodYear,\" \\xB7 \",movie.nation]})}),/*#__PURE__*/_jsxs(Typography,{variant:\"caption\",style:{marginTop:'5px'},children:[\" \",movie.directorNms]})]})]})},index);})}))]});};export default MainTopSection;","map":{"version":3,"names":["React","useState","useEffect","top20sfmoviesDB","Slider","Card","CardContent","Grid","IconButton","Tooltip","Typography","InfoIcon","useNavigate","firebaseStorage","jsx","_jsx","jsxs","_jsxs","MainTopSection","navigate","_useState","_useState2","_slicedToArray","top20Movies","setTop20Movies","_useState3","_useState4","posterUrls","setPosterUrls","getTop20SfMovies","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","res","wrap","_callee$","_context","prev","next","sent","t0","console","error","stop","apply","arguments","getPosterUrls","_ref2","_callee3","urls","_callee3$","_context3","Promise","all","map","_ref3","_callee2","movie","storageRef","url","_callee2$","_context2","ref","concat","movieId","movieSeq","getDownloadURL","abrupt","log","_x","settings","dots","arrows","infinite","speed","slidesToShow","slidesToScroll","autoplay","autoplaySpeed","children","style","display","alignItems","justifyContent","marginBottom","marginRight","variant","sx","fontSize","title","placement","_objectSpread","index","position","maxWidth","height","mx","border","margin","cursor","onClick","src","alt","width","borderRadius","flexDirection","length","slice","container","marginTop","prodYear","nation","directorNms"],"sources":["C:/Users/carax/Desktop/SideProject/SFDB-Project/front/src/pages/main/MainTopSection.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { top20sfmoviesDB } from '../../axios/main/movieLogic';\r\nimport Slider from 'react-slick';\r\nimport \"slick-carousel/slick/slick.css\";\r\nimport \"slick-carousel/slick/slick-theme.css\";\r\nimport { Card, CardContent, Grid, IconButton, Tooltip, Typography} from '@mui/material';\r\nimport InfoIcon from '@mui/icons-material/Info';\r\nimport { useNavigate } from 'react-router';\r\nimport { firebaseStorage } from '../../utils/firebase';\r\n\r\nconst MainTopSection = () => {\r\n  const navigate = useNavigate()\r\n  const [top20Movies, setTop20Movies] = useState([]);\r\n  const [posterUrls, setPosterUrls] = useState([]);\r\n\r\n  useEffect(() => {\r\n    const getTop20SfMovies = async () => {\r\n      try {\r\n        const res = await top20sfmoviesDB();\r\n        setTop20Movies(res);\r\n      } catch (error) {\r\n        console.error('top20영화 로드 실패:', error);\r\n      }\r\n    };\r\n\r\n    getTop20SfMovies();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const getPosterUrls = async () => {\r\n      const urls = await Promise.all(top20Movies.map(async (movie) => {\r\n        const storageRef = firebaseStorage.ref(`poster/${movie.movieId}${movie.movieSeq}.jpg`);\r\n        try {\r\n          const url = await storageRef.getDownloadURL();\r\n          return url;\r\n        } catch (error) {\r\n          console.log(\"포스터 URL 페칭 에러 : \" , error);\r\n          return null;\r\n        }\r\n      }));\r\n      setPosterUrls(urls);\r\n    };\r\n\r\n    getPosterUrls();\r\n  }, [top20Movies]);\r\n\r\n\r\n\r\n\r\n  \r\n  const settings = {\r\n    dots: true,\r\n    arrows : true,\r\n    infinite: true,\r\n    speed: 500,\r\n    slidesToShow: 5,\r\n    slidesToScroll: 2,\r\n    autoplay: true,\r\n    autoplaySpeed: 5000,\r\n  };\r\n\r\n\r\n\r\n\r\n\r\n  return (\r\n  <div>\r\n      <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'center', marginBottom: '16px' , marginRight:'1200px' }}>\r\n        <Typography variant=\"h6\" sx={{ fontSize: 25 }}>Top 20 SF 영화</Typography>\r\n        <Tooltip title=\"왓챠피디아 기준 평균별점이 가장 높은 20개의 SF 영화들입니다.\" placement=\"right\">\r\n          <IconButton>\r\n            <InfoIcon />\r\n          </IconButton>\r\n        </Tooltip>\r\n      </div>\r\n    <Slider {...settings}>\r\n      {top20Movies.map((movie, index) => (\r\n        <div key={index} style={{ position: 'relative'  }}>\r\n          <Card sx={{ maxWidth: 250, height: 450 ,mx: 2 , border:'none',margin: '0 auto' ,cursor: 'pointer' \r\n          }}\r\n            onClick={() => navigate(`/movieDetail/${movie.movieId}${movie.movieSeq}`)}>\r\n\r\n            <img src={posterUrls[index]} alt={movie.title} style={{ width: '100%', height: '350px' , borderRadius:'3px 3px 3px 3px' }} />\r\n            \r\n            <CardContent style={{ border:'none', display: 'flex', flexDirection: 'column', justifyContent: 'flex-start' }}>\r\n          \r\n              <Typography variant=\"subtitle2\" sx={{fontSize:15}}>{movie.title.length > 18 ? `${movie.title.slice(0, 18)}...` : movie.title}</Typography>\r\n              <Grid container justifyContent=\"flex-start\" style={{marginTop:'5px'}}>\r\n                <Typography variant=\"body2\">{movie.prodYear} · {movie.nation}</Typography>\r\n              </Grid>\r\n          \r\n              <Typography variant=\"caption\" style={{marginTop:'5px'}}> {movie.directorNms}\r\n              </Typography>\r\n            </CardContent>\r\n          \r\n          </Card>\r\n        </div>\r\n      ))}\r\n    </Slider>\r\n  </div>\r\n  );\r\n};\r\n\r\nexport default MainTopSection;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}